[agent]
  interval = "30s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "30s"
  flush_jitter = "0s"
  hostname = ""

[[outputs.prometheus_client]]
  listen = ":9273"
  path = "/metrics"
  expiration_interval = "0s"

[[inputs.gnmi]]
  addresses = ["switch-1:6030", "switch-2:6030", "switch-3:6030"]
  username = "REPLACE_ME"
  password = "REPLACE_ME"

  # If the devices use self-signed certs, this is the "insecure" equivalent.
  insecure_skip_verify = true

  # Optional but often helpful; EOS commonly works well with json_ietf
  encoding = "json_ietf"

  redial = "10s"

  ## Strongly recommended for Prom output hygiene
  canonical_field_names = true
  trim_field_names = true

  ## TLS options (this is the “insecure” equivalent)
  ## If your devices use self-signed certs, use insecure_skip_verify.
  ## If your lab uses plaintext gNMI (not recommended), that’s a different knob.
  #[inputs.gnmi.tls]
  #  enable_tls = true
  #  insecure_skip_verify = true

  ## Subscriptions
  [[inputs.gnmi.subscription]]
    name = "interface_counters"
    path = "/interfaces/interface/state/counters"
    subscription_mode = "sample"
    sample_interval = "10s"

  [[inputs.gnmi.subscription]]
    name = "process_cpu"
    path = "/openconfig-system:system/processes/process/state/cpu-utilization"
    subscription_mode = "sample"
    sample_interval = "15s"

  [[inputs.gnmi.subscription]]
    name = "process_mem"
    path = "/openconfig-system:system/processes/process/state/memory-utilization"
    subscription_mode = "sample"
    sample_interval = "15s"
