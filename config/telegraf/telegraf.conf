[agent]
  interval = "30s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "30s"
  flush_jitter = "0s"
  hostname = ""

[[outputs.prometheus_client]]
  listen = ":9273"
  path = "/metrics"
  expiration_interval = "5m"

###############################################################################
# gNMI subscriptions (Arista EOS Native paths)
###############################################################################
[[inputs.gnmi]]
  # Your switches
  addresses = ["switch-1:6030", "switch-2:6030", "switch-3:6030"]
  username = "REPLACE_ME"
  password = "REPLACE_ME"

  # Recommended for OpenConfig/IETF JSON payloads (safe default)
  encoding = "json_ietf"
  redial = "10s"

  # TLS
  tls_enable = true
  insecure_skip_verify = true

  # EOS native trees are under origin eos_native
  # We'll set origin per subscription.

  ###########################################################################
  # EOS Native: CPU / proc / system / version
  ###########################################################################
  [[inputs.gnmi.subscription]]
    name = "eos_cpu"
    origin = "eos_native"
    path = "/Kernel/proc/cpu"
[[inputs.gnmi]]
  addresses = ["192.0.2.10:6030", "192.0.2.11:6030", "192.0.2.12:6030", "192.0.2.13:6030"]
  username = "gnmi-user"
  password = "gnmi-password"
  redial = "10s"
  addresses = ["arista-750-1:6030", "arista-750-2:6030", "arista-7280-1:6030", "arista-7280-2:6030"]
  username = "gnmi-user"
  password = "gnmi-password"
  redial = "10s"
  enable_tls = true
  insecure_skip_verify = true

  [[inputs.gnmi.subscription]]
    name = "interfaces"
    path = "/interfaces/interface/state"
    subscription_mode = "sample"
    sample_interval = "15s"

  [[inputs.gnmi.subscription]]
    name = "eos_procstat"
    origin = "eos_native"
    path = "/Kernel/proc/stat"
    subscription_mode = "sample"
    sample_interval = "15s"

  [[inputs.gnmi.subscription]]
    name = "eos_sysinfo"
    origin = "eos_native"
    path = "/Kernel/sysinfo"
    subscription_mode = "sample"
    sample_interval = "30s"

  [[inputs.gnmi.subscription]]
    name = "eos_version"
    origin = "eos_native"
    path = "/Eos/image"
    subscription_mode = "sample"
    sample_interval = "5m"

  ###########################################################################
  # EOS Native: MAC / ARP / neighbor / routing (tables can be big)
  ###########################################################################
  [[inputs.gnmi.subscription]]
    name = "eos_mactable"
    origin = "eos_native"
    path = "/Smash/bridging/status/smashFdbStatus"
    subscription_mode = "sample"
    sample_interval = "60s"

  [[inputs.gnmi.subscription]]
    name = "eos_arp"
    origin = "eos_native"
    path = "/Smash/arp/status/arpEntry"
    subscription_mode = "sample"
    sample_interval = "60s"

  [[inputs.gnmi.subscription]]
    name = "eos_neighbors"
    origin = "eos_native"
    path = "/Smash/arp/status/neighborEntry"
    subscription_mode = "sample"
    sample_interval = "60s"

  [[inputs.gnmi.subscription]]
    name = "eos_ipv4_rib"
    origin = "eos_native"
    path = "/Smash/routing/status/route"
    subscription_mode = "sample"
    sample_interval = "60s"

  [[inputs.gnmi.subscription]]
    name = "eos_ipv6_rib"
    origin = "eos_native"
    path = "/Smash/routing6/status/route"
    subscription_mode = "sample"
    sample_interval = "60s"

  [[inputs.gnmi.subscription]]
    name = "eos_ipv4_nexthop"
    origin = "eos_native"
    path = "/Smash/routing/status/nexthop"
    subscription_mode = "sample"
    sample_interval = "60s"

  [[inputs.gnmi.subscription]]
    name = "eos_ipv6_nexthop"
    origin = "eos_native"
    path = "/Smash/routing6/status/nexthop"
    subscription_mode = "sample"
    sample_interval = "60s"

  ###########################################################################
  # EOS Native: Interface counters (agent varies by ASIC/platform family)
  #
  # Replace StrataCounters with the right agent for your platform:
  #   SandCounters / StrataCounters / Strata-FixedSystem / FocalPointV2
  # (per Arista doc)
  ###########################################################################
  [[inputs.gnmi.subscription]]
    name = "eos_if_counters"
    origin = "eos_native"
    path = "/Smash/counters/ethIntf/StrataCounters/current/counter"
    subscription_mode = "sample"
    sample_interval = "15s"
    name = "queues"
    path = "/qos/interfaces/interface/output/queues/queue/state"
    subscription_mode = "sample"
    sample_interval = "5s"
